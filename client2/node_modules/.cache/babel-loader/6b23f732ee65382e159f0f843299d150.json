{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\asimatovic\\\\GitProjecten\\\\destinationFinder\\\\client\\\\src\\\\CapitalInit.js\";\nimport React from 'react';\nimport calculateDistance from './util';\nimport axios from 'axios';\nvar homeLat = 52.11;\nvar homeLng = 5.18;\n\nclass CapitalInit extends React.Component {\n  constructor(...args) {\n    super(...args);\n\n    this.initDB = () => {\n      //axios.delete('http://localhost:5000/cities/delete');\n      const url = \"http://api.geonames.org/countryInfoJSON?formatted=true&username=destinationFinder\";\n      fetch(url).then(res => res.json()).then(data => {\n        let i;\n\n        for (i = 0; i < data.geonames.length; i++) {\n          if (data.geonames[i].capital.length > 0) {\n            const name = data.geonames[i].capital;\n            const countryName = data.geonames[i].countryName;\n            const spokenLanguages = data.geonames[i].languages;\n            let urlCitySpecific = \"http://api.geonames.org/searchJSON?q=\" + name + \"&maxRows=2&username=destinationFinder\";\n            fetch(urlCitySpecific).then(res => res.json()).then(data => {\n              let lat = data.geonames[0].lat;\n              let lng = data.geonames[0].lng;\n              const distance = calculateDistance(homeLat, homeLng, lat, lng);\n              let urlWeather = \"http://api.openweathermap.org/data/2.5/weather?q=\" + name + \"&APPID=840e44ccd3376f040093e83e5be8f34f\";\n              fetch(urlWeather).then(res => res.json()).then(data => {\n                try {\n                  let temp = data.main.temp;\n                } catch (e) {\n                  console.log(e);\n                }\n\n                let tempCelcius = (temp - 273.15).toFixed(0);\n                const city = {\n                  \"cityName\": name,\n                  \"countryName\": countryName,\n                  \"spokenLanguages\": spokenLanguages,\n                  \"distance\": distance,\n                  \"temperature\": tempCelcius,\n                  \"cityLat\": lat,\n                  \"cityLng\": lng\n                };\n                axios.post('http://localhost:5000/cities/add', city);\n              });\n            });\n          }\n        }\n\n        console.log(\"DB filled with capitals\");\n      }).catch(console.log);\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      id: \"DBInitBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: this.initDB,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 61\n      },\n      __self: this\n    }, \"Initialize Database\"));\n  }\n\n}\n\nexport default CapitalInit;","map":{"version":3,"sources":["C:/Users/asimatovic/GitProjecten/destinationFinder/client/src/CapitalInit.js"],"names":["React","calculateDistance","axios","homeLat","homeLng","CapitalInit","Component","initDB","url","fetch","then","res","json","data","i","geonames","length","capital","name","countryName","spokenLanguages","languages","urlCitySpecific","lat","lng","distance","urlWeather","temp","main","e","console","log","tempCelcius","toFixed","city","post","catch","render"],"mappings":"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","sourcesContent":["import React from 'react'\r\nimport calculateDistance from './util'\r\nimport axios from 'axios';\r\n\r\nvar homeLat = 52.11;\r\nvar homeLng = 5.18;\r\n\r\nclass CapitalInit extends React.Component {\r\n    initDB = () => {\r\n        //axios.delete('http://localhost:5000/cities/delete');\r\n        const url = \"http://api.geonames.org/countryInfoJSON?formatted=true&username=destinationFinder\";\r\n        fetch(url)\r\n        .then(res => res.json())\r\n        .then(data => {\r\n            let i;\r\n            for (i = 0; i< data.geonames.length;i++){\r\n                if(data.geonames[i].capital.length > 0){\r\n                    const name = data.geonames[i].capital;\r\n                    const countryName = data.geonames[i].countryName;\r\n                    const spokenLanguages = data.geonames[i].languages;\r\n                    let urlCitySpecific = \"http://api.geonames.org/searchJSON?q=\" + name + \"&maxRows=2&username=destinationFinder\";\r\n                    fetch(urlCitySpecific)\r\n                    .then(res => res.json())\r\n                    .then(data => {\r\n                        let lat = data.geonames[0].lat;\r\n                        let lng = data.geonames[0].lng;\r\n                        const distance = calculateDistance(homeLat, homeLng, lat, lng);\r\n\r\n                        let urlWeather = \"http://api.openweathermap.org/data/2.5/weather?q=\" +name + \"&APPID=840e44ccd3376f040093e83e5be8f34f\";\r\n                        fetch(urlWeather)\r\n                        .then(res => res.json())\r\n                        .then(data => {\r\n                            try{let temp = data.main.temp;}\r\n                            catch(e){\r\n                                console.log(e)\r\n                            }\r\n\r\n                            let tempCelcius = (temp - 273.15).toFixed(0);\r\n                            const city = {\r\n                                \"cityName\": name,\r\n                                \"countryName\": countryName,\r\n                                \"spokenLanguages\": spokenLanguages,\r\n                                \"distance\": distance,\r\n                                \"temperature\": tempCelcius,\r\n                                \"cityLat\": lat,\r\n                                \"cityLng\": lng,\r\n                            }\r\n                            axios.post('http://localhost:5000/cities/add', city)\r\n                        })\r\n                    })\r\n                }\r\n            }\r\n            console.log(\"DB filled with capitals\");\r\n        })\r\n        .catch(console.log);\r\n    }\r\n\r\n    render() {\r\n    return(\r\n        <div id=\"DBInitBtn\">\r\n            <button onClick={this.initDB} >Initialize Database</button>\r\n        </div>\r\n    )}\r\n}\r\n\r\nexport default CapitalInit\r\n"]},"metadata":{},"sourceType":"module"}